edition: 3.0.0
name: word2pdf
access: '{{ access }}'
vars:
  region: '{{ region }}'
resources:
  word2pdf:
    component: fc3
    props:
      region: ${vars.region}
      runtime: custom
      memorySize: 3072
      timeout: 1200
      internetAccess: true
      role: '{{ roleArn }}'
      customRuntimeConfig:
        command:
          - python
        args:
          - app.py
        port: 9000
      layers:
        - acs:fc:${vars.region}:1813774388953700:layers/libreoffice-layer-v3/versions/1
      environmentVariables:
        TZ: '{{ timeZone }}'
        OSS_BUCKET: '{{ ossBucket }}'
        LD_LIBRARY_PATH: >-
          /opt/root/usr/lib/libreoffice/program:/opt/root/usr/local/lib:/opt/root/usr/lib:/opt/root/usr/lib/x86_64-linux-gnu:/opt/root/usr/lib64:/opt/root/lib:/opt/root/lib/x86_64-linux-gnu
        PATH: >-
          /opt/root/usr/local/bin:/opt/root/usr/local/sbin:/opt/root/usr/bin:/opt/root/usr/sbin:/opt/root/sbin:/opt/root/bin:/usr/local/bin/apache-maven/bin:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/ruby/bin
        PYTHONPATH: /opt/python
      functionName: '{{ functionName }}'
      code: ./code
      asyncInvokeConfig:
        maxAsyncEventAgeInSeconds: 7200
        maxAsyncRetryAttempts: 3
